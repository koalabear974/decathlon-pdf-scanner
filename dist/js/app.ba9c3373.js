(function(){var e={6700:function(e,t,s){var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":6196,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":6196,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":1500,"./zh-hk.js":1500,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(e){var t=a(e);return s(t)}function a(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=6700},8042:function(e,t,s){"use strict";var n=s(144),r=s(9669),a=s.n(r);let i={};const o=a().create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get(){return o}},$axios:{get(){return o}}})},n.Z.use(Plugin);Plugin;var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[s("v-toolbar-title",[e._v("Pdf2Cal")]),s("v-spacer")],1),s("v-main",[s("router-view")],1)],1)},c=[],d={name:"App",data:()=>({}),components:{},computed:{},created(){},methods:{}},u=d,p=s(1001),m=s(3453),h=s.n(m),f=s(7524),g=s(3343),v=s(7877),j=s(9762),w=s(7921),b=(0,p.Z)(u,l,c,!1,null,null,null),y=b.exports;h()(b,{VApp:f.Z,VAppBar:g.Z,VMain:v.Z,VSpacer:j.Z,VToolbarTitle:w.qW});var E=s(8345),S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("UploadForm",{directives:[{name:"show",rawName:"v-show",value:!e.hasProcessedPdf,expression:"!hasProcessedPdf"}]}),s("UserPicker",{directives:[{name:"show",rawName:"v-show",value:e.hasProcessedPdf&&!e.hasPickedUser,expression:"hasProcessedPdf && !hasPickedUser"}]}),s("CalendarPage",{directives:[{name:"show",rawName:"v-show",value:e.hasProcessedPdf&&e.hasPickedUser,expression:"hasProcessedPdf && hasPickedUser"}]})],1)},D=[],P=s(8367),T=s.n(P),k=s(629),O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mx-auto mt-5"},[s("v-form",{ref:"fileForm",attrs:{disabled:e.loading},on:{submit:function(t){return t.preventDefault(),e.uploadFile.apply(null,arguments)}}},[s("v-card-title",[e._v(" Upload the calendar pdf file or paste the URL of the file: ")]),s("v-card-text",[s("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]),s("v-text-field",{attrs:{rules:e.urlRules,"prepend-icon":"mdi-link",label:"File Link"},model:{value:e.fileUrl,callback:function(t){e.fileUrl=t},expression:"fileUrl"}}),s("v-file-input",{attrs:{rules:e.fileRules,accept:".pdf",label:"File input"},model:{value:e.fileBlob,callback:function(t){e.fileBlob=t},expression:"fileBlob"}})],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading}},[e._v(" Process PDF ")])],1)],1)],1)},A=[],C=(s(9016),{data:()=>({fileUrl:"",fileBlob:null,success:!1,error:!1,loading:!1}),computed:{urlRules(){return[e=>!!e||null!==this.fileBlob||"Url or file is required",e=>null!==this.fileBlob||/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(e)||"Invalid URL"]},fileRules(){return[e=>!!e||""!==this.fileUrl||"Url or file is required"]}},methods:{async uploadFile(){if(this.success=!1,this.error=!1,!this.$refs.fileForm.validate())return;if(this.fileBlob&&this.fileUrl)return void(this.error="Only one of the upload method has to be used.");this.loading=!0;const e=this.fileBlob?URL.createObjectURL(this.fileBlob):this.fileUrl;if(console.log(this.$root.$options.pdfjsLib),!this.$root.$options.pdfjsLib)return this.error="Error in loading PDF library.",void(this.loading=!1);try{await this.$store.dispatch("readPdf",{url:e,pdfjsLib:this.$root.$options.pdfjsLib}),this.success=!0}catch(t){console.error(t),this.error=`An error occurred while processing PDF: ${t.message}.`}this.loading=!1}}}),I=C,Z=s(1234),x=s(680),L=s(3237),_=s(7118),U=s(3065),V=s(6232),R=s(8459),B=(0,p.Z)(I,O,A,!1,null,null,null),N=B.exports;h()(B,{VAlert:Z.Z,VBtn:x.Z,VCard:L.Z,VCardActions:_.h7,VCardText:_.ZB,VCardTitle:_.EB,VFileInput:U.Z,VForm:V.Z,VSpacer:j.Z,VTextField:R.Z});var Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mx-auto mt-5"},[s("v-card-title",[e._v("Here are the people found in the calendar:")]),s("v-card-subtitle",[e._v(" Click on a name to get to the personal calendar. ")]),s("v-card-text",[s("v-list",[s("v-list-item-group",{attrs:{"active-class":"primary--text"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.eventPeople,(function(t){return s("v-list-item",{key:t},[s("v-list-item-avatar",{staticClass:"text-center white--text text-h5",attrs:{color:"red"}},[e._v(" "+e._s(e.getInitials(t))+" ")]),s("v-list-item-content",[s("v-list-item-title",{domProps:{innerHTML:e._s(t)}}),s("v-list-item-subtitle",[e._v(" "+e._s(e.eventsCountPerPerson(t))+" events found. ")])],1),s("v-list-item-action",[s("v-btn",{attrs:{color:e.eventsCountPerPerson(t)>0?"primary":"grey",disabled:0===e.eventsCountPerPerson(t)}},[e._v(" open ")])],1)],1)})),1)],1)],1)],1)},F=[],z=s(2297),M=s.n(z),G={data:()=>({selected:null}),computed:{...(0,k.Se)(["eventPeople","getEventsByPerson"])},methods:{getInitials(e){return e.split(" ").map((e=>e[0])).join("")},eventsCountPerPerson(e){return M()(this.getEventsByPerson(e).map((e=>Object.keys(e).length)))}},watch:{selected:function(e){this.eventsCountPerPerson(this.eventPeople[e])>0&&this.$store.dispatch("pickUser",{user:this.eventPeople[e]})}}},$=G,H=s(6816),q=s(7620),Q=s(3099),K=s(5457),J=s(9036),W=s(6651),X=(0,p.Z)($,Y,F,!1,null,null,null),ee=X.exports;h()(X,{VBtn:x.Z,VCard:L.Z,VCardSubtitle:_.Qq,VCardText:_.ZB,VCardTitle:_.EB,VList:H.Z,VListItem:q.Z,VListItemAction:Q.Z,VListItemAvatar:K.Z,VListItemContent:J.km,VListItemGroup:W.Z,VListItemSubtitle:J.oZ,VListItemTitle:J.V9});var te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mx-auto mt-5"},[s("v-card-title",[e._v("Here is "+e._s(e.pickedUser)+" calendar:")]),s("v-card-subtitle",[e._v(" Please double check that generated events are correct. ")]),s("v-card-actions",[s("v-row",[s("v-col",[s("v-btn",{staticClass:"ml-2 mb-2",attrs:{color:e.googleSuccess?"success":"primary",disabled:e.googleLoading},on:{click:e.authorizeGoogle}},[s("v-icon",{attrs:{left:""}},[e._v(" "+e._s(e.googleSuccess?"mdi-check":"mdi-google")+" ")]),e._v(" "+e._s(e.googleSuccess?"Google Calendar loaded":"Get Google Calendar")+" ")],1),s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isSignedInGoogle,expression:"isSignedInGoogle"}],staticClass:"ml-2 mb-2",attrs:{color:"error"},on:{click:this.$root.$options.googleApi.signOut}},[s("v-icon",{attrs:{left:""}},[e._v(" mdi-google ")]),e._v(" Sign out from Google ")],1),s("v-btn",{staticClass:"ml-2 mb-2",attrs:{color:e.icsSuccess?"success":"primary",disabled:e.icsLoading},on:{click:e.downloadICSFile}},[s("v-icon",{attrs:{left:""}},[e._v(" "+e._s(e.icsSuccess?"mdi-check":"mdi-apple")+" ")]),e._v(" "+e._s(e.icsSuccess?"iCal Downloaded":"Download iCal")+" ")],1)],1)],1)],1),s("v-card-text",[e.error?s("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),s("v-calendar",{ref:"calendar",attrs:{now:e.today,value:e.today,events:e.events,"first-interval":7,"interval-minutes":60,"interval-count":15,weekdays:[1,2,3,4,5,6,0],color:"primary",type:"week"}}),s("v-spacer"),s("vue-pdf-embed",{attrs:{source:e.pdfUrl}})],1)],1)},se=[],ne=s(381),re=s.n(ne),ae=s(3492),ie=s.n(ae),oe=s(5934);const le=(e,t)=>{const s=new Blob([e],{type:"text/calendar"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,t);else{const e=window.document.createElement("a");e.download=t,e.href=window.URL.createObjectURL(s),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},ce=e=>{const t="YYYYMMDDTHHmmss";let s="BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//Pdf2Cal v0.1//NONSGML iCal Writer//EN\r\nCALSCALE:GREGORIAN\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Berlin\r\nX-LIC-LOCATION:Europe/Berlin\r\nBEGIN:DAYLIGHT\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nTZNAME:CEST\r\nDTSTART:19700329T020000\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nTZNAME:CET\r\nDTSTART:19701025T030000\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nMETHOD:PUBLISH\r\n",n=e.map((e=>Object.keys(e).map((s=>({description:s,start:e[s][0].format(t),end:e[s][1].format(t)})))));n=[].concat.apply([],n);const r=re()().format(t)+"Z",a=Intl.DateTimeFormat().resolvedOptions().timeZone;return n.forEach((e=>{s=s+"BEGIN:VEVENT\r\nDTSTART;TZID="+a+":"+e.start+"\r\nDTEND;TZID="+a+":"+e.end+"\r\nDTSTAMP:"+r+"\r\nUID:"+(0,oe.Z)()+"\r\nCREATED:"+r+"\r\nDESCRIPTION:"+e.description+"\r\nLAST-MODIFIED:"+r+"\r\nSEQUENCE:0\r\nSTATUS:CONFIRMED\r\nSUMMARY:"+e.description+"\r\nTRANSP:OPAQUE\r\nEND:VEVENT\r\n"})),s+="END:VCALENDAR",s};var de={components:{VuePdfEmbed:ie()},data:()=>({googleLoading:!1,googleSuccess:!1,icsLoading:!1,icsSuccess:!1,error:""}),computed:{...(0,k.Se)(["pickedUser","dateLine","getEventsByPerson","pdfUrl","isSignedInGoogle"]),personEvents(){return this.getEventsByPerson(this.pickedUser)},today(){return this.dateLine&&this.dateLine[0]?this.dateLine[0].format("YYYY-MM-DD"):re()().format("YYYY-MM-DD")},events(){if(!this.personEvents)return[];const e=this.personEvents.map((e=>Object.keys(e).map((t=>({name:t.replace("Decathlon ",""),start:e[t][0].format("YYYY-MM-DD HH:mm"),end:e[t][1].format("YYYY-MM-DD HH:mm")})))));return[].concat.apply([],e)}},methods:{async authorizeGoogle(){if(this.googleLoading=!0,this.isSignedInGoogle){const e=await this.$root.$options.googleApi.uploadEvents(this.personEvents);this.googleSuccess=e.success,this.error=e.error}else await this.$root.$options.googleApi.signIn();this.googleLoading=!1},async downloadICSFile(){this.icsLoading=!0;const e=ce(this.personEvents);le(e,"Decathlon_ical.ics"),this.icsLoading=!1,this.icsSuccess=!0}},mounted(){}},ue=de,pe=s(9703),me=s(2102),he=s(6428),fe=s(2877),ge=(0,p.Z)(ue,te,se,!1,null,null,null),ve=ge.exports;h()(ge,{VAlert:Z.Z,VBtn:x.Z,VCalendar:pe.Z,VCard:L.Z,VCardActions:_.h7,VCardSubtitle:_.Qq,VCardText:_.ZB,VCardTitle:_.EB,VCol:me.Z,VIcon:he.Z,VRow:fe.Z,VSpacer:j.Z});var je={name:"HomeView",components:{UploadForm:N,UserPicker:ee,CalendarPage:ve},data:()=>({}),computed:{hasProcessedPdf(){return!T()(this.calendarData)},hasPickedUser(){return""!==this.pickedUser},...(0,k.Se)(["calendarData","pickedUser"])},methods:{}},we=je,be=s(9846),ye=(0,p.Z)(we,S,D,!1,null,null,null),Ee=ye.exports;h()(ye,{VContainer:be.Z}),n.Z.use(E.Z);const Se=[{path:"/",name:"home",component:Ee,meta:{requiresGuest:!0}}],De=new E.Z({mode:"history",base:"/",routes:Se});var Pe=De;const Te=e=>e&&e.str&&e.str.indexOf("_T")>=0,ke=e=>{let t;return"[object Date]"===toString.call(e)||("function"===typeof e.replace&&e.replace(/^\s+|\s+$/gm,""),t=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,t.test(e))},Oe=e=>e[0]&&(e[0].indexOf("frei")>=0||e[0].indexOf("abwesend")>=0||e[0].indexOf("_T")>=0||e[0].indexOf(":")>=0&&e[0].indexOf("-")>=0),Ae=e=>e&&(e.indexOf("frei")>=0||e.indexOf("abwesend")>=0||e.indexOf(":")>=0&&e.indexOf("-")>=0&&-1===e.indexOf(" - ")&&/\d/.test(e)),Ce=async(e,t)=>{const s=await t.getDocument(e).promise,n=[];for(let r=1;r<=s.numPages;r++){const e=await s.getPage(r);n.push(await e.getTextContent())}return n},Ie=e=>[].concat.apply([],e.map((e=>e.items))).filter((e=>" "!==e.str)),Ze=e=>{let t=[],s=0;e.forEach(((e,n,r)=>{if(r[n].hasEOL&&(""===r[n].str||ke(r[n].str))){if(Te(r[n+1]))return;s++}else t[s]&&0!==t[s].length||(t[s]=[]),t[s].push(r[n].str)}));let n=[];return s=0,t.forEach(((e,t,r)=>{1!==e.length?(n[s]&&0!==n[s].length||(n[s]=[]),n[s]=n[s].concat(e),s++):Oe(r[t+1])&&(n[s]&&0!==n[s].length||(n[s]=[]),n[s]=n[s].concat(e))})),n},xe=e=>(e=e.filter(((e,t)=>0===t||e.some((e=>Ae(e))))),e.forEach(((t,s)=>{0!==s&&(e[s]=t.filter(((e,t)=>0===t||Ae(e))))})),e),Le=e=>{const t=e.find((e=>-1!==e.indexOf(" - ")));let[s,n]=t.split(" - ");s=re()(s,"DD.MM.YY"),n=re()(n,"DD.MM.YY");const r=[s];while(r[r.length-1]&&r[r.length-1].isBefore(n))r.push(r[r.length-1].clone().add(1,"days"));return r},_e=(e,t)=>{const s=[];let n=0;return e.forEach(((e,r)=>{if(0!==r)if("frei"===e||"abwesend"===e)void 0!==s[n]&&Object.keys(s[n]).length>0&&n++,s[n]={},n++;else{const r=e.substr(-1!==e.indexOf(" ")?e.indexOf(" "):0);let[a,i]=r.split("-");const o=-1!==e.indexOf(" ")?` ${e.split(" ")[0]}`:"",l=s[n]?Object.keys(s[n]):[];let c=t[n].clone();c.set("hour",a.split(":")[0]),c.set("minute",a.split(":")[1]);let d=t[n].clone();d.set("hour",i.split(":")[0]),d.set("minute",i.split(":")[1]);const u=`Decathlon${o} ${c.format("HH:mm")}`;if(void 0===s[n]||0===s[n].length)s[n]={},s[n][u]=[c,d];else{const e=s[n][l[l.length-1]];e[1].isSame(c)||(n++,c=t[n].clone(),c.set("hour",a.split(":")[0]),c.set("minute",a.split(":")[1]),d=t[n].clone(),d.set("hour",i.split(":")[0]),d.set("minute",i.split(":")[1]),s[n]={}),s[n][u]=[c,d]}}})),s},Ue=e=>{const t=Le(e[0]),s={};return e.forEach(((e,n)=>{0!==n&&(s[e[0]]=_e(e,t))})),{dateLine:t,eventArray:s}};n.Z.use(k.ZP);var Ve=new k.ZP.Store({state:{calendarData:{},pickedUser:"",pdfUrl:"",googleUserSignedIn:!1},mutations:{SET_PDF_URL(e,{url:t}){e.pdfUrl=t},SET_CALENDAR_DATA(e,{data:t}){e.calendarData=t},SET_PICKED_USER(e,{user:t}){e.pickedUser=t},SET_GOOGLE_USER(e,{signedIn:t}){e.googleUserSignedIn=t}},getters:{calendarData(e){return e.calendarData||{}},pdfUrl(e){return e.pdfUrl||""},dateLine(e){return e.calendarData.dateLine||{}},eventArray(e){return e.calendarData.eventArray||{}},pickedUser(e){return e.pickedUser||""},eventPeople(e){return e.calendarData.eventArray?Object.keys(e.calendarData.eventArray):{}},getEventsByPerson:e=>t=>e.calendarData.eventArray?e.calendarData.eventArray[t]:[],isSignedInGoogle(e){return e.googleUserSignedIn}},actions:{readPdf:async({commit:e},{url:t,pdfjsLib:s})=>{const n=await Ce(t,s);let r=Ze(Ie(n));r=xe(r),e("SET_CALENDAR_DATA",{data:Ue(r)}),e("SET_PDF_URL",{url:t})},pickUser:({commit:e},{user:t})=>{e("SET_PICKED_USER",{user:t})},updateGoogleSignInStatus:({commit:e},{signedIn:t})=>{e("SET_GOOGLE_USER",{signedIn:t})}},modules:{}}),Re=s(1910);n.Z.use(Re.Z);var Be=new Re.Z({}),Ne=JSON.parse('{"Y":{"ix":"863717814354-ajonfc0cm6d3mk8o982iop073f1kn8as.apps.googleusercontent.com","q1":"AIzaSyCxL3zwilLhR8YwB3GE7pi9t7hFH2DVQJ8","k0":"https://www.googleapis.com/auth/calendar","Ck":["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}}');class Ye{constructor(){const e=document.createElement("script"),t=this;e.onload=function(){t.handleClientLoad()},e.async=!0,e.defer=!0,e.src="https://apis.google.com/js/api.js",document.head.appendChild(e)}handleClientLoad(){window.gapi&&window.gapi.load("client:auth2",this.initClient.bind(this))}async initClient(){if(window.gapi)try{await window.gapi.client.init({apiKey:Ne.Y.q1,clientId:Ne.Y.ix,discoveryDocs:Ne.Y.Ck,scope:Ne.Y.k0}),window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSignInStatus),this.updateSignInStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get())}catch(e){console.log("Google API Error:"+e.message)}}updateSignInStatus(e){Ve.dispatch("updateGoogleSignInStatus",{signedIn:e})}async signIn(){window.gapi&&await window.gapi.auth2.getAuthInstance().signIn()}signOut(){window.gapi&&window.gapi.auth2.getAuthInstance().signOut()}async uploadEvents(e){try{await new Promise((e=>{window.gapi.client.load("calendar","v3",e)}))}catch(o){return{success:!1,error:"Couldn't load calendar API: "+o.message}}let t;try{t=await new Promise((e=>{window.gapi.client.calendar.calendarList.list({maxResults:250,minAccessRole:"writer"}).execute(e)}))}catch(o){return{success:!1,error:"Error in fetching calendar list: "+o.message}}const s=t.items;let n="";try{if(s.map((e=>e.summary)).includes("Decathlon Agenda"))n=s.find((e=>"Decathlon Agenda"===e.summary)).id;else{const e=await new Promise((e=>{window.gapi.client.calendar.calendars.insert({summary:"Decathlon Agenda",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).execute(e)}));n=e.id}}catch(o){return{success:!1,error:"Error in creating or finding Decathlon calendar: "+o.message}}let r,a=e.map((e=>Object.keys(e).map((t=>({summary:t,start:{dateTime:e[t][0].format()},end:{dateTime:e[t][1].format()}})))));a=[].concat.apply([],a);try{r=await new Promise((e=>{window.gapi.client.calendar.events.list({calendarId:n,timeMin:a[0].start.dateTime,singleEvents:!0,maxResults:10,orderBy:"startTime"}).then(e)}))}catch(o){return{success:!1,error:"Error in fetching Decathlon calendar events: "+o.message}}const i=r.result.items;if(i.length>0&&i[0].summary===a[0].summary)return{success:!1,error:"Caution it seems like this calendar have been already imported."};try{const e=window.gapi.client.newBatch();return a.forEach((t=>{e.add(window.gapi.client.calendar.events.insert({calendarId:n,resource:t}))})),e.then((function(){return{success:!0,error:""}}))}catch(o){return{success:!1,error:"Error in creating the new events: "+o.message}}}}n.Z.config.productionTip=!1,new n.Z({router:Pe,store:Ve,vuetify:Be,googleApi:new Ye,pdfjsLib:window.pdfjsLib,render:e=>e(y)}).$mount("#app")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,function(){var e=[];s.O=function(t,n,r,a){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],a=e[d][2];for(var o=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,i=n[0],o=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var d=l(s)}for(t&&t(n);c<i.length;c++)a=i[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=self["webpackChunkPdf2Cal"]=self["webpackChunkPdf2Cal"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(8042)}));n=s.O(n)})();
//# sourceMappingURL=app.ba9c3373.js.map
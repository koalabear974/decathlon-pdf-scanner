(function(){var e={46700:function(e,t,n){var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id=46700},18042:function(e,t,n){"use strict";n(66992),n(88674),n(19601),n(17727);var r=n(20144),s=(n(41539),n(9669)),a=n.n(s),i={},o=a().create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},r.Z.use(Plugin);Plugin;var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("v-toolbar-title",[e._v("Pdf2Cal")]),n("v-spacer")],1),n("v-main",[n("router-view")],1)],1)},u=[],l={name:"App",data:function(){return{}},components:{},computed:{},created:function(){},methods:{}},d=l,f=n(1001),p=n(43453),m=n.n(p),v=n(17524),h=n(13343),g=n(67877),j=n(99762),w=n(27921),b=(0,f.Z)(d,c,u,!1,null,null,null),k=b.exports;m()(b,{VApp:v.Z,VAppBar:h.Z,VMain:g.Z,VSpacer:j.Z,VToolbarTitle:w.qW});var E=n(78345),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("UploadForm",{directives:[{name:"show",rawName:"v-show",value:!e.hasProcessedPdf,expression:"!hasProcessedPdf"}]}),n("UserPicker",{directives:[{name:"show",rawName:"v-show",value:e.hasProcessedPdf&&!e.hasPickedUser,expression:"hasProcessedPdf && !hasPickedUser"}]}),n("CalendarPage",{directives:[{name:"show",rawName:"v-show",value:e.hasProcessedPdf&&e.hasPickedUser,expression:"hasProcessedPdf && hasPickedUser"}]})],1)},x=[],S=n(4367),D=n(41609),Z=n.n(D),P=n(20629),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5"},[n("v-form",{ref:"fileForm",attrs:{disabled:e.loading},on:{submit:function(t){return t.preventDefault(),e.uploadFile.apply(null,arguments)}}},[n("v-card-title",[e._v(" Upload the calendar pdf file or paste the URL of the file: ")]),n("v-card-text",[n("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]),n("v-text-field",{attrs:{rules:e.urlRules,"prepend-icon":"mdi-link",label:"File Link"},model:{value:e.fileUrl,callback:function(t){e.fileUrl=t},expression:"fileUrl"}}),n("v-file-input",{attrs:{rules:e.fileRules,accept:".pdf",label:"File input"},model:{value:e.fileBlob,callback:function(t){e.fileBlob=t},expression:"fileBlob"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",type:"submit",disabled:e.loading}},[e._v(" Process PDF ")])],1)],1)],1)},O=[],A=n(16198),C=(n(35666),n(74916),n(77601),n(78783),n(33948),n(60285),n(41637),n(79016),{data:function(){return{fileUrl:"",fileBlob:null,success:!1,error:!1,loading:!1}},computed:{urlRules:function(){var e=this;return[function(t){return!!t||null!==e.fileBlob||"Url or file is required"},function(t){return null!==e.fileBlob||/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi.test(t)||"Invalid URL"}]},fileRules:function(){var e=this;return[function(t){return!!t||""!==e.fileUrl||"Url or file is required"}]}},methods:{uploadFile:function(){var e=this;return(0,A.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.success=!1,e.error=!1,e.$refs.fileForm.validate()){t.next=4;break}return t.abrupt("return");case 4:if(!e.fileBlob||!e.fileUrl){t.next=7;break}return e.error="Only one of the upload method has to be used.",t.abrupt("return");case 7:if(e.loading=!0,n=e.fileBlob?URL.createObjectURL(e.fileBlob):e.fileUrl,console.log(e.$root.$options.pdfjsLib),e.$root.$options.pdfjsLib){t.next=14;break}return e.error="Error in loading PDF library.",e.loading=!1,t.abrupt("return");case 14:return t.prev=14,t.next=17,e.$store.dispatch("readPdf",{url:n,pdfjsLib:e.$root.$options.pdfjsLib});case 17:e.success=!0,t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](14),console.error(t.t0),e.error="An error occurred while processing PDF: ".concat(t.t0.message,".");case 24:e.loading=!1;case 25:case"end":return t.stop()}}),t,null,[[14,20]])})))()}}}),I=C,L=n(51234),R=n(680),_=n(53237),U=n(37118),V=n(3065),B=n(46232),N=n(38459),Y=(0,f.Z)(I,T,O,!1,null,null,null),F=Y.exports;m()(Y,{VAlert:L.Z,VBtn:R.Z,VCard:_.Z,VCardActions:U.h7,VCardText:U.ZB,VCardTitle:U.EB,VFileInput:V.Z,VForm:B.Z,VSpacer:j.Z,VTextField:N.Z});var z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5"},[n("v-card-title",[e._v("Here are the people found in the calendar:")]),n("v-card-subtitle",[e._v(" Click on a name to get to the personal calendar. ")]),n("v-card-text",[n("v-list",[n("v-list-item-group",{attrs:{"active-class":"primary--text"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.eventPeople,(function(t){return n("v-list-item",{key:t},[n("v-list-item-avatar",{staticClass:"text-center white--text text-h5",attrs:{color:"red"}},[e._v(" "+e._s(e.getInitials(t))+" ")]),n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:e._s(t)}}),n("v-list-item-subtitle",[e._v(" "+e._s(e.eventsCountPerPerson(t))+" events found. ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{color:e.eventsCountPerPerson(t)>0?"primary":"grey",disabled:0===e.eventsCountPerPerson(t)}},[e._v(" open ")])],1)],1)})),1)],1)],1)],1)},M=[],G=n(12297),$=n.n(G),H=(n(69600),n(21249),n(23123),n(47941),{data:function(){return{selected:null}},computed:(0,S.Z)({},(0,P.Se)(["eventPeople","getEventsByPerson"])),methods:{getInitials:function(e){return e.split(" ").map((function(e){return e[0]})).join("")},eventsCountPerPerson:function(e){return $()(this.getEventsByPerson(e).map((function(e){return Object.keys(e).length})))}},watch:{selected:function(e){this.eventsCountPerPerson(this.eventPeople[e])>0&&this.$store.dispatch("pickUser",{user:this.eventPeople[e]})}}}),q=H,Q=n(16816),K=n(97620),J=n(83099),W=n(5457),X=n(39036),ee=n(76651),te=(0,f.Z)(q,z,M,!1,null,null,null),ne=te.exports;m()(te,{VBtn:R.Z,VCard:_.Z,VCardSubtitle:U.Qq,VCardText:U.ZB,VCardTitle:U.EB,VList:Q.Z,VListItem:K.Z,VListItemAction:J.Z,VListItemAvatar:W.Z,VListItemContent:X.km,VListItemGroup:ee.Z,VListItemSubtitle:X.oZ,VListItemTitle:X.V9});var re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto mt-5"},[n("v-card-title",[e._v("Here is "+e._s(e.pickedUser)+" calendar:")]),n("v-card-subtitle",[e._v(" Please double check that generated events are correct. ")]),n("v-card-actions",[n("v-row",[n("v-col",[n("v-btn",{staticClass:"ml-2 mb-2",attrs:{color:e.googleSuccess?"success":"primary",disabled:e.googleLoading},on:{click:e.authorizeGoogle}},[n("v-icon",{attrs:{left:""}},[e._v(" "+e._s(e.googleSuccess?"mdi-check":"mdi-google")+" ")]),e._v(" "+e._s(e.googleSuccess?"Google Calendar loaded":"Get Google Calendar")+" ")],1),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isSignedInGoogle,expression:"isSignedInGoogle"}],staticClass:"ml-2 mb-2",attrs:{color:"error"},on:{click:this.$root.$options.googleApi.signOut}},[n("v-icon",{attrs:{left:""}},[e._v(" mdi-google ")]),e._v(" Sign out from Google ")],1),n("v-btn",{staticClass:"ml-2 mb-2",attrs:{color:e.icsSuccess?"success":"primary",disabled:e.icsLoading},on:{click:e.downloadICSFile}},[n("v-icon",{attrs:{left:""}},[e._v(" "+e._s(e.icsSuccess?"mdi-check":"mdi-apple")+" ")]),e._v(" "+e._s(e.icsSuccess?"iCal Downloaded":"Download iCal")+" ")],1)],1)],1)],1),n("v-card-text",[e.error?n("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),n("v-calendar",{ref:"calendar",attrs:{now:e.today,value:e.today,events:e.events,"first-interval":7,"interval-minutes":60,"interval-count":15,weekdays:[1,2,3,4,5,6,0],color:"primary",type:"week"}}),n("v-spacer"),n("vue-pdf-embed",{attrs:{source:e.pdfUrl}})],1)],1)},se=[],ae=(n(15306),n(92222),n(30381)),ie=n.n(ae),oe=n(43492),ce=n.n(oe),ue=(n(54747),n(82526),n(41817),n(25934)),le=function(e,t){var n=new Blob([e],{type:"text/calendar"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var r=window.document.createElement("a");r.download=t,r.href=window.URL.createObjectURL(n),document.body.appendChild(r),r.click(),document.body.removeChild(r)}},de=function(e){var t="YYYYMMDDTHHmmss",n="BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//Pdf2Cal v0.1//NONSGML iCal Writer//EN\r\nCALSCALE:GREGORIAN\r\nBEGIN:VTIMEZONE\r\nTZID:Europe/Berlin\r\nX-LIC-LOCATION:Europe/Berlin\r\nBEGIN:DAYLIGHT\r\nTZOFFSETFROM:+0100\r\nTZOFFSETTO:+0200\r\nTZNAME:CEST\r\nDTSTART:19700329T020000\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3\r\nEND:DAYLIGHT\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0200\r\nTZOFFSETTO:+0100\r\nTZNAME:CET\r\nDTSTART:19701025T030000\r\nRRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nMETHOD:PUBLISH\r\n",r=e.map((function(e){return Object.keys(e).map((function(n){return{description:n,start:e[n][0].format(t),end:e[n][1].format(t)}}))}));r=[].concat.apply([],r);var s=ie()().format(t)+"Z",a=Intl.DateTimeFormat().resolvedOptions().timeZone;return r.forEach((function(e){n=n+"BEGIN:VEVENT\r\nDTSTART;TZID="+a+":"+e.start+"\r\nDTEND;TZID="+a+":"+e.end+"\r\nDTSTAMP:"+s+"\r\nUID:"+(0,ue.Z)()+"\r\nCREATED:"+s+"\r\nDESCRIPTION:"+e.description+"\r\nLAST-MODIFIED:"+s+"\r\nSEQUENCE:0\r\nSTATUS:CONFIRMED\r\nSUMMARY:"+e.description+"\r\nTRANSP:OPAQUE\r\nEND:VEVENT\r\n"})),n+="END:VCALENDAR",n},fe={components:{VuePdfEmbed:ce()},data:function(){return{googleLoading:!1,googleSuccess:!1,icsLoading:!1,icsSuccess:!1,error:""}},computed:(0,S.Z)((0,S.Z)({},(0,P.Se)(["pickedUser","dateLine","getEventsByPerson","pdfUrl","isSignedInGoogle"])),{},{personEvents:function(){return this.getEventsByPerson(this.pickedUser)},today:function(){return this.dateLine&&this.dateLine[0]?this.dateLine[0].format("YYYY-MM-DD"):ie()().format("YYYY-MM-DD")},events:function(){if(!this.personEvents)return[];var e=this.personEvents.map((function(e){return Object.keys(e).map((function(t){return{name:t.replace("Decathlon ",""),start:e[t][0].format("YYYY-MM-DD HH:mm"),end:e[t][1].format("YYYY-MM-DD HH:mm")}}))}));return[].concat.apply([],e)}}),methods:{authorizeGoogle:function(){var e=this;return(0,A.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.googleLoading=!0,!e.isSignedInGoogle){t.next=9;break}return t.next=4,e.$root.$options.googleApi.uploadEvents(e.personEvents);case 4:n=t.sent,e.googleSuccess=n.success,e.error=n.error,t.next=11;break;case 9:return t.next=11,e.$root.$options.googleApi.signIn();case 11:e.googleLoading=!1;case 12:case"end":return t.stop()}}),t)})))()},downloadICSFile:function(){var e=this;return(0,A.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.icsLoading=!0,n=de(e.personEvents),le(n,"Decathlon_ical.ics"),e.icsLoading=!1,e.icsSuccess=!0;case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){}},pe=fe,me=n(59703),ve=n(82102),he=n(96428),ge=n(62877),je=(0,f.Z)(pe,re,se,!1,null,null,null),we=je.exports;m()(je,{VAlert:L.Z,VBtn:R.Z,VCalendar:me.Z,VCard:_.Z,VCardActions:U.h7,VCardSubtitle:U.Qq,VCardText:U.ZB,VCardTitle:U.EB,VCol:ve.Z,VIcon:he.Z,VRow:ge.Z,VSpacer:j.Z});var be={name:"HomeView",components:{UploadForm:F,UserPicker:ne,CalendarPage:we},data:function(){return{}},computed:(0,S.Z)({hasProcessedPdf:function(){return!Z()(this.calendarData)},hasPickedUser:function(){return""!==this.pickedUser}},(0,P.Se)(["calendarData","pickedUser"])),methods:{}},ke=be,Ee=n(99846),ye=(0,f.Z)(ke,y,x,!1,null,null,null),xe=ye.exports;m()(ye,{VContainer:Ee.Z}),r.Z.use(E.Z);var Se=[{path:"/",name:"home",component:xe,meta:{requiresGuest:!0}}],De=new E.Z({mode:"history",base:"/",routes:Se}),Ze=De,Pe=(n(57327),function(e){return e&&e.str&&e.str.indexOf("_T")>=0}),Te=function(e){var t;return"[object Date]"===toString.call(e)||("function"===typeof e.replace&&e.replace(/^\s+|\s+$/gm,""),t=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,t.test(e))},Oe=function(e){return e[0]&&(e[0].indexOf("frei")>=0||e[0].indexOf("abwesend")>=0||e[0].indexOf("_T")>=0||e[0].indexOf(":")>=0&&e[0].indexOf("-")>=0)},Ae=function(e){return e&&(e.indexOf("frei")>=0||e.indexOf("abwesend")>=0||e.indexOf(":")>=0&&e.indexOf("-")>=0&&-1===e.indexOf(" - ")&&/\d/.test(e))},Ce=function(){var e=(0,A.Z)(regeneratorRuntime.mark((function e(t,n){var r,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getDocument(t).promise;case 2:r=e.sent,s=[],a=1;case 5:if(!(a<=r.numPages)){e.next=17;break}return e.next=8,r.getPage(a);case 8:return i=e.sent,e.t0=s,e.next=12,i.getTextContent();case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:a++,e.next=5;break;case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(e){return[].concat.apply([],e.map((function(e){return e.items}))).filter((function(e){return" "!==e.str}))},Le=function(e){var t=[],n=0;e.forEach((function(e,r,s){if(s[r].hasEOL&&(""===s[r].str||Te(s[r].str))){if(Pe(s[r+1]))return;n++}else t[n]&&0!==t[n].length||(t[n]=[]),t[n].push(s[r].str)}));var r=[];return n=0,t.forEach((function(e,t,s){1!==e.length?(r[n]&&0!==r[n].length||(r[n]=[]),r[n]=r[n].concat(e),n++):Oe(s[t+1])&&(r[n]&&0!==r[n].length||(r[n]=[]),r[n]=r[n].concat(e))})),r},Re=function(e){return e=e.filter((function(e,t){return 0===t||e.some((function(e){return Ae(e)}))})),e.forEach((function(t,n){0!==n&&(e[n]=t.filter((function(e,t){return 0===t||Ae(e)})))})),e},_e=n(75200),Ue=(n(69826),function(e){var t=e.find((function(e){return-1!==e.indexOf(" - ")})),n=t.split(" - "),r=(0,_e.Z)(n,2),s=r[0],a=r[1];s=ie()(s,"DD.MM.YY"),a=ie()(a,"DD.MM.YY");var i=[s];while(i[i.length-1]&&i[i.length-1].isBefore(a))i.push(i[i.length-1].clone().add(1,"days"));return i}),Ve=function(e,t){var n=[],r=0;return e.forEach((function(e,s){if(0!==s)if("frei"===e||"abwesend"===e)void 0!==n[r]&&Object.keys(n[r]).length>0&&r++,n[r]={},r++;else{var a=e.substr(-1!==e.indexOf(" ")?e.indexOf(" "):0),i=a.split("-"),o=(0,_e.Z)(i,2),c=o[0],u=o[1],l=-1!==e.indexOf(" ")?" ".concat(e.split(" ")[0]):"",d=n[r]?Object.keys(n[r]):[],f=t[r].clone();f.set("hour",c.split(":")[0]),f.set("minute",c.split(":")[1]);var p=t[r].clone();p.set("hour",u.split(":")[0]),p.set("minute",u.split(":")[1]);var m="Decathlon".concat(l," ").concat(f.format("HH:mm"));if(void 0===n[r]||0===n[r].length)n[r]={},n[r][m]=[f,p];else{var v=n[r][d[d.length-1]];v[1].isSame(f)||(r++,f=t[r].clone(),f.set("hour",c.split(":")[0]),f.set("minute",c.split(":")[1]),p=t[r].clone(),p.set("hour",u.split(":")[0]),p.set("minute",u.split(":")[1]),n[r]={}),n[r][m]=[f,p]}}})),n},Be=function(e){var t=Ue(e[0]),n={};return e.forEach((function(e,r){0!==r&&(n[e[0]]=Ve(e,t))})),{dateLine:t,eventArray:n}};r.Z.use(P.ZP);var Ne=new P.ZP.Store({state:{calendarData:{},pickedUser:"",pdfUrl:"",googleUserSignedIn:!1},mutations:{SET_PDF_URL:function(e,t){var n=t.url;e.pdfUrl=n},SET_CALENDAR_DATA:function(e,t){var n=t.data;e.calendarData=n},SET_PICKED_USER:function(e,t){var n=t.user;e.pickedUser=n},SET_GOOGLE_USER:function(e,t){var n=t.signedIn;e.googleUserSignedIn=n}},getters:{calendarData:function(e){return e.calendarData||{}},pdfUrl:function(e){return e.pdfUrl||""},dateLine:function(e){return e.calendarData.dateLine||{}},eventArray:function(e){return e.calendarData.eventArray||{}},pickedUser:function(e){return e.pickedUser||""},eventPeople:function(e){return e.calendarData.eventArray?Object.keys(e.calendarData.eventArray):{}},getEventsByPerson:function(e){return function(t){return e.calendarData.eventArray?e.calendarData.eventArray[t]:[]}},isSignedInGoogle:function(e){return e.googleUserSignedIn}},actions:{readPdf:function(){var e=(0,A.Z)(regeneratorRuntime.mark((function e(t,n){var r,s,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,s=n.url,a=n.pdfjsLib,e.next=4,Ce(s,a);case 4:i=e.sent,o=Le(Ie(i)),o=Re(o),r("SET_CALENDAR_DATA",{data:Be(o)}),r("SET_PDF_URL",{url:s});case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),pickUser:function(e,t){var n=e.commit,r=t.user;n("SET_PICKED_USER",{user:r})},updateGoogleSignInStatus:function(e,t){var n=e.commit,r=t.signedIn;n("SET_GOOGLE_USER",{signedIn:r})}},modules:{}}),Ye=n(59973);r.Z.use(Ye.Z);var Fe=new Ye.Z({}),ze=n(76133),Me=n(92751),Ge=(n(26699),n(32023),JSON.parse('{"Y":{"ix":"863717814354-ajonfc0cm6d3mk8o982iop073f1kn8as.apps.googleusercontent.com","q1":"AIzaSyCxL3zwilLhR8YwB3GE7pi9t7hFH2DVQJ8","k0":"https://www.googleapis.com/auth/calendar","Ck":["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}}')),$e=function(){function e(){(0,ze.Z)(this,e);var t=document.createElement("script"),n=this;t.onload=function(){n.handleClientLoad()},t.async=!0,t.defer=!0,t.src="https://apis.google.com/js/api.js",document.head.appendChild(t)}return(0,Me.Z)(e,[{key:"handleClientLoad",value:function(){window.gapi&&window.gapi.load("client:auth2",this.initClient.bind(this))}},{key:"initClient",value:function(){var e=(0,A.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.gapi){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.gapi.client.init({apiKey:Ge.Y.q1,clientId:Ge.Y.ix,discoveryDocs:Ge.Y.Ck,scope:Ge.Y.k0});case 5:window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSignInStatus),this.updateSignInStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log("Google API Error:"+e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateSignInStatus",value:function(e){Ne.dispatch("updateGoogleSignInStatus",{signedIn:e})}},{key:"signIn",value:function(){var e=(0,A.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.gapi){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,window.gapi.auth2.getAuthInstance().signIn();case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){window.gapi&&window.gapi.auth2.getAuthInstance().signOut()}},{key:"uploadEvents",value:function(){var e=(0,A.Z)(regeneratorRuntime.mark((function e(t){var n,r,s,a,i,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){window.gapi.client.load("calendar","v3",e)}));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",{success:!1,error:"Couldn't load calendar API: "+e.t0.message});case 8:return e.prev=8,e.next=11,new Promise((function(e){window.gapi.client.calendar.calendarList.list({maxResults:250,minAccessRole:"writer"}).execute(e)}));case 11:n=e.sent,e.next=17;break;case 14:return e.prev=14,e.t1=e["catch"](8),e.abrupt("return",{success:!1,error:"Error in fetching calendar list: "+e.t1.message});case 17:if(r=n.items,s="",e.prev=19,r.map((function(e){return e.summary})).includes("Decathlon Agenda")){e.next=27;break}return e.next=23,new Promise((function(e){window.gapi.client.calendar.calendars.insert({summary:"Decathlon Agenda",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).execute(e)}));case 23:a=e.sent,s=a.id,e.next=28;break;case 27:s=r.find((function(e){return"Decathlon Agenda"===e.summary})).id;case 28:e.next=33;break;case 30:return e.prev=30,e.t2=e["catch"](19),e.abrupt("return",{success:!1,error:"Error in creating or finding Decathlon calendar: "+e.t2.message});case 33:return i=t.map((function(e){return Object.keys(e).map((function(t){return{summary:t,start:{dateTime:e[t][0].format()},end:{dateTime:e[t][1].format()}}}))})),i=[].concat.apply([],i),e.prev=35,e.next=38,new Promise((function(e){window.gapi.client.calendar.events.list({calendarId:s,timeMin:i[0].start.dateTime,singleEvents:!0,maxResults:10,orderBy:"startTime"}).then(e)}));case 38:o=e.sent,e.next=44;break;case 41:return e.prev=41,e.t3=e["catch"](35),e.abrupt("return",{success:!1,error:"Error in fetching Decathlon calendar events: "+e.t3.message});case 44:if(c=o.result.items,!(c.length>0&&c[0].summary===i[0].summary)){e.next=47;break}return e.abrupt("return",{success:!1,error:"Caution it seems like this calendar have been already imported."});case 47:return e.prev=47,u=window.gapi.client.newBatch(),i.forEach((function(e){u.add(window.gapi.client.calendar.events.insert({calendarId:s,resource:e}))})),e.abrupt("return",u.then((function(){return{success:!0,error:""}})));case 53:return e.prev=53,e.t4=e["catch"](47),e.abrupt("return",{success:!1,error:"Error in creating the new events: "+e.t4.message});case 56:case"end":return e.stop()}}),e,null,[[0,5],[8,14],[19,30],[35,41],[47,53]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();r.Z.config.productionTip=!1,new r.Z({router:Ze,store:Ne,vuetify:Fe,googleApi:new $e,pdfjsLib:window.pdfjsLib,render:function(e){return e(k)}}).$mount("#app")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){var e=[];n.O=function(t,r,s,a){if(!r){var i=1/0;for(l=0;l<e.length;l++){r=e[l][0],s=e[l][1],a=e[l][2];for(var o=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,a<i&&(i=a));if(o){e.splice(l--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,a,i=r[0],o=r[1],c=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(c)var l=c(n)}for(t&&t(r);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},r=self["webpackChunkPdf2Cal"]=self["webpackChunkPdf2Cal"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(18042)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.07e272f6.js.map